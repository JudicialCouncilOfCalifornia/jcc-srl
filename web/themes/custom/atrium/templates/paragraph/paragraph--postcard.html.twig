{#
/**
 * @file
 * Template for "Postcard" Paragraph.
 *
 */
#}
{% extends 'paragraph.html.twig' %}
{% block content %}

  {# Set defaults for Postcard component. #}
  {% set header_align_variant = 'has-header-right' %}
  {% set tag = 'h2' %}
  {% set image = content.field_media %}

  {% if paragraph.field_postcard_display.value == 'child' %}
    {% set header_align_variant = 'has-header-right' %}
    {% set tag = 'h3' %}

  {% elseif paragraph.field_postcard_display.value == 'background_image' %}
    {% set header_align_variant = 'has-background-image' %}
    {% set tag = 'h2' %}
    {% if content.field_media|render %}
      {% set image_id = paragraph.field_media.entity.id() %}
      {% set image = drupal_entity('media', image_id, 'postcard_background') %}
    {% endif %}
  {% endif %}

  {# @todo We may need to use the read-more.twig component here?  #}
  {% set body %}
    {{ content.field_body }}
    {{ content.field_link }}
  {% endset %}

  {% include '@molecules/blocks/postcard/postcard.twig' with {
    header_align_variant: header_align_variant,
    headergroup: {
      title: content.field_title_display,
      body: body,
      tag: tag,
    },
    tag: content.field_text_overlay,
    img: image,
  } only %}

  {% if content.field_additional|render %}
    {% include '@organisms/sections/text-section/text-section.twig' with {
      column_variant: 'two-columns-threequarter',
      headergroup: {
        lead: content.field_additional,
      },
    } only %}
  {% endif %}

  {{ content|without(
    'field_additional',
    'field_body',
    'field_create_anchor',
    'field_link',
    'field_media',
    'field_postcard_display',
    'field_text_overlay',
    'field_title_display'
  ) }}

{% endblock %}
